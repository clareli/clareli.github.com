<!DOCTYPE HTML> 
<html> 
	<head> 
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<META HTTP-EQUIV="Pragma" CONTENT="no-cache">    
  		<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">    
  		<META HTTP-EQUIV="Expires" CONTENT="0">
		<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/> 
		<meta name="format-detection" content="telephone=no"/> 		
        <title>问题详情</title>
       	<!-- <link rel="stylesheet" href="http://cache.soso.com/mobile/wenwen/css/wenwen_mobile_base_rev.css"/> -->
       	<link rel="stylesheet" href="../css/wenwen_mobile_base_rev.css"/>
		<link rel="stylesheet" href="../css/wenwen_mobile_question_detail_rev.css"/>
		<style type="text/css">
		.app_name {margin:5px 0 0;}
		.app_name a{font-size:12px;color:#06c;}
		
		.view_bar{ position:fixed; top:0px; left:0px; width:100%; height:43px; 
				line-height:43px; text-align: center; background-color: rgba(0,0,0,0.6); 
				box-shadow: 0 1px 1px rgba(150,150,150,0.2);}
		.view_bar span{ color: #FFFFFF; font-size:15px;}
		.view_bar .btn_close{ position: absolute; top:2px; right:2px; display: block; width:40px; height:40px;}
		.view_bar .btn_close::before{ float: left; margin:10px 0 0 10px; display: block; content: " ";width:15px; 
			height:15px;background: url(http://3gimg.qq.com/wenwen/weixin/image/ico_layer_close.png) no-repeat; background-size:15px 15px;}
			
		.pic_view_wrap{vertical-align:middle; display: table-cell;text-align:center;}
		.pic_view_wrap img{vertical-align:middle;}
		.textarea_wrap_0{padding:0 5px;position:relative}
		.textarea_no_before::before{display:none}
		.tips{bottom:0;left:0;background:#FFEFC8;color:#6F654D;padding:8px;box-sizing:border-box}
		</style>
</head>
<body>
<div class='header'>
	    <div class="default_wrap">
	    	
	        <a class="goback"  href="javascript:history.go(-1);"></a>
	        
	        <a class="sgww_logo_rev" href="/index.jsp?sid=ATWM_XHKvCECazaeGCC6z_TP&amp;g_ut=3"></a>
	          <a id="search_btn" class="searchBtn" onclick="chg_search_div(this);" ></a>
	        
	    </div>
	    <div id="search_question_div" class="search_question" style="display:none;">	    
		    <form id="search_form_common" action="/search.jsp?g_ut=3" method="GET">	
			<div class="search_wrap">
				<a id="search_button_common" class="search_button" onclick="return to_search(this);"></a>
				<div class="search">				
					<div><input id="h_keywords_common" name="key"  value=""  type="text"  onfocus="init_startbox()"/></div>
					<input name="sid"  value="ATWM_XHKvCECazaeGCC6z_TP"  type="hidden" />
				</div>
			</div>		
			</form>
	    </div>
	</div>	
	
	<script type="text/javascript">
		var topSmartBox;
		function init_startbox() {	
			if(!topSmartBox) {
		   		var topConf_common = {
		       		url: "/api/smartbox.jsp?g_ut=3&type=wenwen&num=5&key=",
		       		target: document.getElementById("h_keywords_common"), //input输入框
		       		searchUrl: "/search.jsp?sid=ATWM_XHKvCECazaeGCC6z_TP&g_ut=3&key=",
		       		needHistory: 1, //设置是否需要搜索历史提示，1表示需要，0表示不需要
		       		smartTipIcfa:["1309313", "1309314", "1309315", "1309316", "1309317"], //点击smartbox条目时的icfa参数，个数请与要求返回的条数一致
		       		smartPresetIcfa:["1309313", "1309314", "1309315", "1309316", "1309317"], //点击smartbox预置按钮时的icfa参数，元素个数请与要求的返回条目保持一致
		       		historyTipIcfa:["", "", ""],  //搜索历史点击时的icfa参数
		    	}
		   		topSmartBox = new Smartbox(topConf_common);
			}
		}
	</script>	

	
  <div class="section_wrap">
    <div class="question_content">
	  <div class="title_wrap">我是黑龙江的一名556的理科女生 大家帮我提提建议 我去哪所大学比较好 什么专业 跪求 要稳妥一些的 <a href="javascript:;" class="ico_pic"></a><i class="ico_urgent"></i><i class="ico_score_one">5</i><i class="ico_score_two">10</i><i class="ico_score_three">100</i></div>		
		
	  <div class="content_detail" data-type="ques_content">
		<p></p>
		
	  </div><!-- content_detail -->
	  <div class="content_source">
	  	<a href='/userwenwen.jsp?ch=wap3.de.dn.de.na1&amp;sid=ATWM_XHKvCECazaeGCC6z_TP&amp;userqq=43901b042410ec42ff3ef6387ca8f3ed&amp;g_ut=3'>～再见～</a>
	  	<span class="time">2分钟前</span>
	  </div>
	
		<!-- 回答框 -->
		<div class="mod_textarea_wrap">
			<div class="mod_textarea">
				<input id="ans_qid" name="qid" value="581715614" type="hidden"/>
				<input id="ans_anonymous" type="hidden" name="anonymous" value=""/>
				<input id="ans_tid" type="hidden" name="tid" value=""/>
				<input id="ans_rid" type="hidden" value=""/>
				<input type="hidden" name="openQqRemind" id="openQqRemind" value="on"/>
				<textarea name="ans" id="ans_content_id" 
					placeholder="快来帮助TA吧" ></textarea>
			</div>
			<div class="answer_toolbar">
				<div class="option_wrap">
					<a class="btn_checkbox" href="javascript:;" data-name="anonymous">匿名</a>
					<!-- <a class="btn_upload_pic" href="javascript:;"></a>
					<a class="btn_positioning" href="javascript:;"></a> -->
					
					<a class="btn_checkbox  checkbox_checked"  href="javascript:;" 
						data-name="qqRemind">用QQ提醒查收消息</a>
					
				</div>
			</div>
		</div><!-- answer_wrap -->
		<button class="btn_mod" id="btn_ans" onclick='return answerLoginTip()' 
			data-ch="wap3.de.dn.mi.co">提交答案</button>

	</div><!--question_content-->
  </div><!--section_wrap-->


<div class="content_list_wrap">
		<h2 class="title">等你来答</h2>
		<section class="unit_wrap">
			<a href="#">
				<div class="content_detail">
					<i class="phone"></i>谁会看小狗是啥品种？会的加一下QQ24873857，在这里谢谢大家啦</div>

				</a><div class="ico_wrap"><a href="#"></a><a href="javascript:;" class="ico_pic"></a><i class="ico_urgent"></i><i class="ico_score_three">200</i></div>

				<div class="content_source">
					<span class="time">2014.10.05</span>
					<span class="num">13人已回答</span>
				</div>
			
		</section>

		<section class="unit_wrap">
			<a href="#">
				<div class="content_detail">
					<i class="phone"></i>谁会看小狗是啥品种？会的加一下QQ24873857，在这里谢谢大家啦</div>

				</a><div class="ico_wrap"><a href="#"></a><a href="javascript:;" class="ico_pic"></a><i class="ico_urgent"></i><i class="ico_score_two">10</i></div>

				<div class="content_source">
					<span class="time">2014.10.05</span>
					<span class="num">13人已回答</span>
				</div>
			
		</section>
		<section class="unit_wrap">
			<a href="#">
				<div class="content_detail">
					<i class="phone"></i>谁会看小狗是啥品种？会的加一下QQ24873857，在这里谢谢大家啦</div>

				</a><div class="ico_wrap"><a href="#"></a><a href="javascript:;" class="ico_pic"></a><i class="ico_urgent"></i><i class="ico_score_three">200</i></div>

				<div class="content_source">
					<span class="time">2014.10.05</span>
					<span class="num">13人已回答</span>
				</div>
			
		</section>
		<section class="unit_wrap">
			<a href="#">
				<div class="content_detail">
					<i class="phone"></i>谁会看小狗是啥品种？会的加一下QQ24873857，在这里谢谢大家啦</div>

				</a><div class="ico_wrap"><a href="#"></a><a href="javascript:;" class="ico_pic"></a><i class="ico_urgent"></i><i class="ico_score_three">200</i></div>

				<div class="content_source">
					<span class="time">2014.10.05</span>
					<span class="num">13人已回答</span>
				</div>
			
		</section>
		<section class="unit_wrap">
			<a href="#">
				<div class="content_detail">
					<i class="phone"></i>我皮肤一向很白很白。可爬山回来就被
 晒的又黑又红，无法见人。要多久才</div>

				</a><div class="ico_wrap"><a href="#"></a><a href="javascript:;" class="ico_pic"></a><i class="ico_urgent"></i><i class="ico_score_three">200</i></div>

				<div class="content_source">
					<span class="time">2014.10.05</span>
					<span class="num">13人已回答</span>
				</div>
			
		</section>
</div>


  <div class="pic_view_layer" data-pic-top="0">
  </div> 
  
	<div class="mask" style="display:none"></div>
	<div class="captcha_layer" style="display:none">
		<a class="btn_close" href="javascript:;"></a>
		<div class="captcha_wrap">
			<p>请输入验证码（不区分大小写）</p>
			<div class="captcha_input">
				<input class="captcha" id="vcode" type="text" />
				<a href="javascript:;">换一张</a>
			</div>
			<a class="btn_submit" id="btn_verify" href="javascript:;" onclick="return answerQus();">确认提交</a>
		</div>
	</div>  
    <a href="javascript:;" class="back_top" style="display:none;"></a>
    
 
	<script type="text/javascript" src="http://3gimg.qq.com/wenwen/newiphone/script/st_get.js?v=20140609"></script>  
	<script type="text/javascript" src="http://3gimg.qq.com/wenwen/newiphone/script/zepto.js?v=20140609"></script>
	<script type="text/javascript" src = "http://cache.soso.com/mobile/wenwen/js/wenwen_common.js?v=20140609"></script>
	<script type="text/javascript" src="http://3glogo.gtimg.com/soso/iphone/v1/js/common/smartbox_min.js?v=1"></script>
	<script type="text/javascript">
	
	var qid = "581715614";
	var uin = "-123872761";
	var loginSid = "ATWM_XHKvCECazaeGCC6z_TP";
	var isMethodQues = false;
	var verifyImgUrl = "http://wenwen.m.sogou.com/captcha?cid=3g&rdm=1403492697021";
	var isLogined = false;
	var isSolved = false;
	
	$('.btn_checkbox').click(function(){
	   	$(this).toggleClass("checkbox_checked");
	   	if ($(this).attr("data-name") == "anonymous") {
		   	$("#ans_anonymous").val($(this).hasClass("checkbox_checked"));		   	
	   	} else if ($(this).attr("data-name") == "qqRemind") {
		   	$("#openQqRemind").val($(this).hasClass("checkbox_checked") ? "on" : "");
	   	}
	})
	
	
	function len(s) { 
		var l = 0; 
		if (s) {
			for (var i=0;i<s.length;i++) { 
				if (s.charCodeAt(i)<299) { 
					l++; 
				} else { 
					l+=2; 
				} 
			} 
		}
		return l; 
	}

	function answerQus(){
		var _sid = $("#sid").val();
		if(!$("#ans_content_id").val()){
			new WW_mobile.tips({
				message:"请您回答后再提交哦",
				autoClose:2000
			});
			return;
		}
		var verifyCode = "";
		if ($("#vcode").length == 1) {
			verifyCode = $("#vcode").val();
		}
	    $.ajax({
	    	type:'GET',
	    	url:"/api/action.jsp?ch=wap3.qudetail.x.top.ans&from=ac_index",
	    	data:{ac:'21',
					sid:loginSid,
					qid:$("#ans_qid").val(),
					rid:$("#ans_rid").val(),
	    			answer:$("#ans_content_id").val(),
	    			anonymous:$("#ans_anonymous").val(),
	    			origp:'ac.ctg',
	    			tid:$("#ans_tid").val(),
	    			openQqRemind:$("#openQqRemind").val(),
	    			verifyCode:verifyCode},
	    	dataType:'json',
	    	timeout:10000,
	    	context:$('body'),
	    	success:function(data){
				if(data.success){
					st_get($("#btn_ans"),"wap3.qudetail.x.top.ans");
					window.location.href="/newiphone/do_ans_succ.jsp?g_ut=3&sid=ATWM_XHKvCECazaeGCC6z_TP&from=ac_index						&title=%E4%B8%BA%E4%BD%95%E6%88%91%E5%9C%A8%E7%BD%91%E9%80%9A%E4%B8%80%E5%8C%BA%E5%A4%A7%E7%9A%84%E6%AF%94%E8%B5%9B%E6%80%BB%E6%98%AF%E4%BC%9A%E8%BE%93%E3%80%82%E6%80%BB%E6%98%AF%E9%81%87%E5%88%B0%E5%9D%91&catid=1191510016						&qid=581715614&openQqRemind=" + $("#openQqRemind").val();
				} else {
					if (data.err_code == -100 || data.err_code == -101) {
						showVerifyCode();
					} else {
						new WW_mobile.tips({
							message:data.message,
							autoClose:2000
						});
					}
				}				
	    	},
	    	error:function(xhr, type){
				new WW_mobile.tips({
					message:"回答失败",
					autoClose:2000
				});
	    	}
	    })
	}
	
	function answerLoginTip(){
		var loginUrl = "http://pt.3g.qq.com/s?aid=touchLogin&bid_code=wenwen&t=sogouwenwen&css=http://cache.soso.com/mobile/wenwen/css/login_sogou.css&r=957&go_url=http%3A%2F%2Fwenwen.m.sogou.com%3A80%2Fqudetail.jsp%3Fqid%3D581715614%26from%3Dac_index%26ch%3Dwap3.ac.cat.lnn%26g_ut%3D3%26origp%3Dac.ctg" + encodeURIComponent("&src=loginAndAns&answer=" 
				+ $("#ans_content_id").val() + "&anonymous=" + $("#ans_anonymous").val()
				+ "&openQqRemind=" + $("#openQqRemind").val());
		var content = '<p>你需要登录QQ帐户才能提交回答哦！</p>';		
		content += '		<div class="button">';
		content += '			<a href="' + loginUrl + '">现在去登录</a>';
		content += '		</div>';
		tips = new WW_mobile.confirmTips({
			message : content,		
			mask : true
		})
	}
	
	
	
	function showVerifyCode() {
		window.scrollTo(0, 0); 
		$(".mask").show();
		$(".captcha_layer").show();
		var imgHtml = "<img src='" + verifyImgUrl + Math.random() + "' alt=''/>";	
		$(".captcha_input").find("img").remove();
		$(".captcha_input").find("input").focus();
		$(imgHtml).insertBefore($(".captcha_input").find("a"));
		var tipPreventDefaultHandler = function(e) { e.preventDefault(); return false;}
		$(".captcha_layer").on("touchmove", tipPreventDefaultHandler);
		$(".mask").on("touchmove", tipPreventDefaultHandler);
	}

	function supplement_submit() {
		var _sid = $("#sid").val();
	    $.ajax({
	    	type:'GET',
	    	url:"/api/action.jsp?ch=wap3.qudetail.x.top.ans&from=ac_index",
	    	data:{ac:'14',
					sid:loginSid,
					qid:$("#supplement_qid").val(),
					rid:$("#supplement_rid").val(),
					supplement:$("#supplement_content_id").val()},
	    	dataType:'json',
	    	timeout:10000,
	    	context:$('body'),
	    	success:function(data){
				new WW_mobile.tips({
					message:data.message,
					autoClose:2000
				});
				
				if(data.success){
					window.location.reload();
				}    				
	    	},
	    	error:function(xhr, type){
				new WW_mobile.tips({
					message:"补充回答失败",
					autoClose:2000
				});
	    	}
	    })
	}
	
	function show_supplement_div(elem) {
		var o = $(elem);
		if(o.hasClass("open")) { //close
			o.removeClass("open");
			o.addClass("close");
			$("#supplement_div1").hide();
			$("#supplement_div2").hide();
		} else { //open
			o.removeClass("close");
			o.addClass("open");
			$("#supplement_div1").show();
			$("#supplement_div2").show();
		}
		return false;
	}
	
	function show_pump_div() {
		$(this).parents(".content_source").children(".adopt_answer_wrap").hide();
		var pumpDiv = $(this).parents(".content_source").children(".examine_minutely_wrap");
		if (pumpDiv.css("display") == "none") {
			pumpDiv.show();
			$(this).addClass("examine_minutely_clicked");
			$(this).parent().parent().find(".adopt_answer").removeClass("adopt_answer_clicked");
		} else {
			pumpDiv.hide();
			$(this).removeClass("examine_minutely_clicked");
		}
	}
	
	function show_adopt_div() {
		$(this).parents(".content_source").children(".examine_minutely_wrap").hide();
		var adoptDiv = $(this).parents(".content_source").children(".adopt_answer_wrap");
		if (adoptDiv.css("display") == "none") {
			adoptDiv.show();
			$(this).addClass("adopt_answer_clicked");
			$(this).parent().parent().find(".examine_minutely").removeClass("examine_minutely_clicked");
			if (isMethodQues) {
				pr_get($(this), "wap3.de.dn.to.ev", 0, "wapask");
			}
		} else {
			$(this).removeClass("adopt_answer_clicked");
			adoptDiv.hide();
		}
	}
	
	function pump_submit() {
		var answerid = $(this).parents(".content_source").attr("data-aid");
		var pumpContent = $(this).parent().prev().find("textarea").val();
		if (pumpContent.length < 2) {
			show_msg("您的输入过短，请重新输入");
			return;
		}
	    $.ajax({
	    	type:'GET',
	    	url:'/api/action.jsp?ch=wap3.ask.x.bottom.ask&from=ac_index',
	    	data:{ac:'13',
					sid:loginSid,
					qid:qid,
					rid:answerid,
					pump:pumpContent},
	    	dataType:'json',
	    	timeout:10000,
	    	context:$('body'),
	    	success:function(data){
				new WW_mobile.tips({
					message:data.message,
					autoClose:2000
				});
				
				if(data.success){
					window.location.reload();
				}    				
	    	},
	    	error:function(xhr, type){
				new WW_mobile.tips({
					message:"追问失败",
					autoClose:2000
				});
	    	}
	    })
	    return false;
	}
	
	var tips;
	function cancel_tips() {
		if(tips && tips != null) {
			tips.close();
			tips = null;
		}
		return false;
	}		

	function take_answer() {
		var evaValue = $(this).parent().parent().children().first().val();
		if (!isMethodQues) {
			evaValue = "0";
		}
		var aid = $(this).parents(".content_source").attr("data-aid");
		var thisObj = $(this);
		
		$.ajax({
	    	type:'GET',
	    	url:'/api/action.jsp',
	    	data:{ac:'11',
					sid:loginSid,
					qid:qid,
					aid:aid,
					evaVal:evaValue},
	    	dataType:'json',
	    	timeout:10000,
	    	context:$('body'),
	    	success:function(data){
	    		if (isMethodQues) {
					pr_get(thisObj, "wap3.de.dn.to." + evaValue, 0, "wapask");
				}
				new WW_mobile.tips({
					message:data.message,
					autoClose:2000
				});					
				if(data.success){
					window.location.reload();
				}    				
	    	},
	    	error:function(xhr, type){
				new WW_mobile.tips({
					message:"采纳答案失败",
					autoClose:2000
				});
	    	}
	    })
	}

	/*tips 隐藏*/
	var opacityHidden = function(){};
	for (var i in WW_mobile.animate.prototype) {
		opacityHidden.prototype[i] = WW_mobile.animate.prototype[i]; 
		opacityHidden.prototype['constructor'] = opacityHidden;
	}

	opacityHidden.prototype.getNewInfo = function () {
		this.c = this.end - this.b;
	},

	opacityHidden.prototype.play = function () {
		var elem = this.elem,
			type = this.type,
			This = this;

		;(function () {
			This.getNewInfo();
			var t = This.t,
				b = This.b,
				c = This.c,
				d = This.d;
			this.b = This.tween(t,b,c,d);
			elem.style[type] = this.b/100;
			if (This.t < This.d) {
				This.t++;
				setTimeout(arguments.callee,This.time);
			} else {
				This.callback();
			}
		})();		  
	}

	function hideTips() {
		var tips = $('#quickAnswerTips'),
			animate;

		animate = new opacityHidden();
		animate.init({
			elem : tips[0],
			type : 'opacity',
			end : 0,
			time : 20,
			d : 18,
			tween : function (t,b,c,d) {
				return c*t/d + b;
			}
		})
		animate.b = 100;
		animate.play();
	}
	
	function show_msg(msg) {
		new WW_mobile.tips({
			message:msg,
			autoClose:2000
		});
	}
	
	function sendZanRequest(aid) {
		$.ajax({
			type:'GET',
			url:"/eva_answer.jsp?sid=ATWM_XHKvCECazaeGCC6z_TP&qid=581715614&g_ut=3&rand=" + Math.random() + "&aid=" + aid,
			dataType:'json',
			timeout:10000,
			success:function(data){
				if (data.resultCode == '0') {
					$("#zan_num_" + aid).text(data.resultMsg);
					$("#zan_num_" + aid).addClass("good_clicked");
					$("#cai_num_" + aid).addClass("bad_clicked");
					show_msg("有帮助+1");
					
					if (isMethodQues) {
						$("#zan_num_" + aid).addClass("good_answer_clicked");
						
						var aidFilter = "[data-aid='" + aid + "']";
						$(".agree_with_wrap").filter(aidFilter).show();
						$(".comment_content").filter(aidFilter).removeClass("comment_clicked");
						$(".comment_additional_wrap").filter(aidFilter).hide();
						$(".more_option").filter(aidFilter).removeClass("more_option_clicked");
						$(".toolbar_open").filter(aidFilter).hide();
						if (isSolved) {
							pr_get($(".good_answer").filter(aidFilter), "wap3.de.in.to.ev", 0, "wapask");
						}
					}
				} else if (data.resultMsg == '-1') { // 结果消息-1，是重复操作
					show_msg("你已经评价过这个答案啦!");
				} else if (data.resultMsg != ''){
					show_msg(data.resultMsg);
				} else{
					show_msg("网络繁忙，操作失败，请稍候。");
				}
			},
		})
	}
	
	function sendCaiRequest(aid) {
		if ($("#cai_num_" + aid).attr("class").indexOf("bad_clicked") >= 0) {
			show_msg("你已经评价过这个答案啦!");
			return;
		} 
		$.ajax({
			type:'GET',
			url:"/eva_answer.jsp?sid=ATWM_XHKvCECazaeGCC6z_TP&qid=581715614&g_ut=3&op=1&rand=" + Math.random() + "&aid=" + aid,
			dataType:'json',
			timeout:10000,
			success:function(data){
				if (data.resultCode == '0') {
					$("#cai_num_" + aid).text(data.resultMsg);
					$("#cai_num_" + aid).attr("data-added", "true");
					$("#cai_num_" + aid).addClass("bad_clicked");
					$("#zan_num_" + aid).addClass("good_clicked");
					show_msg("没帮助+1");
				} else if (data.resultMsg == '-1') { // 结果消息-1，是重复操作
					show_msg("你已经评价过这个答案啦!");
				} else if (data.resultMsg != ''){
					show_msg(data.resultMsg);
				} else {
					show_msg("网络繁忙，操作失败，请稍候。");
				}
			},
		})
	}
	
	function sendAnsCommentRequest(aid,content) {
		$.ajax({
			type:'POST',
			url:'/api/action.jsp',
	    	data:{ac:'29',
					sid:loginSid,
					qid:qid,
					aid:aid,
					content:content},
			dataType:'json',
			timeout:10000,
			success:function(data){
				if (data.resultCode == '0') {
					show_msg("评论成功！");
					var html = "<li data-aid='" + aid + "'><p>" + data.content + "</p>";
					html += "<div class='content_source'>" + data.userLink;
					html += "<span class='time'>" + data.time + "</span></div></li>";
					var commentLis = $("#comment_list_" + aid).find("li");
					if (commentLis && commentLis.length > 0) { 
						$(html).insertBefore($("#comment_list_" + aid).find("li")[0]);
					} else {
						$("#comment_list_" + aid).html(html);
					} 
					$("#comment_num_" + aid).text(data.resultMsg);
					var textArea = $("#ans_comment_" + aid);
					textArea.val("");
					textArea.text("");
					textArea.html("");
					
					textArea.parent().removeClass("onfocus");
					textArea.parent().parent().find(".btn_wrap").hide();
					
					
					
				} else {
					show_msg(data.message);
				}
			},
		})
	}
	
	// 点赞js功能设置	
	function zanAnwser(){
		var aid = $(this).attr("data-aid");
		
		var aidFilter = "[data-aid='" + aid + "']";
		if ($(this).attr("class").indexOf("good_clicked") >= 0) {
			if (isMethodQues) {
				var agreeDiv = $(".agree_with_wrap").filter(aidFilter);
				if (agreeDiv.css("display") == "none") {
					
					var hasAttendedCai = $(".bad_answer").filter(aidFilter).attr("data-added");
					// 如果当前用户没有踩过这个答案
					if(hasAttendedCai == "false") {
						agreeDiv.show();
						$(this).addClass("good_answer_clicked");
						//if (isSolved) {
							pr_get($(".good_answer").filter(aidFilter), "wap3.de.in.to.ev", 0, "wapask");
						//}
						
						$(".comment_content").filter(aidFilter).removeClass("comment_clicked");
						$(".comment_additional_wrap").filter(aidFilter).hide();
						$(".more_option").filter(aidFilter).removeClass("more_option_clicked");
						$(".toolbar_open").filter(aidFilter).hide();
					} else if(hasAttendedCai == "true") { // 已经踩过
						show_msg("你已经评价过这个答案啦!");
					}
				} else {
					agreeDiv.hide();
					$(this).removeClass("good_answer_clicked");
				}
			} else {
				show_msg("你已经评价过这个答案啦!");
			}
			
			return;
		} 
		sendZanRequest(aid);
	}
	
	function caiAnwser(){
		sendCaiRequest($(this).attr("data-aid"));
	}
	
	function commentAnwser(){
		var aid = $(this).attr("data-aid");
		var content = $("#ans_comment_" + aid).val();
		if (len(content) == 0) {
			show_msg("请输入评论再提交哦");
			return;
		}
		if (len(content) > 280) {
			show_msg("评论字数不能超过140个字哦");
			return;
		}
		sendAnsCommentRequest(aid, content);
	}
	
	function zanLoginTip() {
		loginTip("loginAndZan", $(this).attr("data-aid"), "");
	}
	
	function caiLoginTip() {
		loginTip("loginAndCai", $(this).attr("data-aid"), "");
	}
	function commentAnsLoginTip() {
		var aid = $(this).attr("data-aid");
		var content = $("#ans_comment_" + aid).val();
		if (len(content) == 0) {
			show_msg("请输入评论再提交哦");
			return;
		}
		if (len(content) > 280) {
			show_msg("评论字数不能超过140个字哦");
			return;
		}
		
		// 先检查一边内容是否合法，不然经过ptlogin登录跳转内容里的敏感词会被换成***
		$.ajax({
			type:'GET',
			url:'/api/action.jsp',
	    	data:{ac:'30',
				  content:content},
			dataType:'json',					  
			timeout:10000,
			success:function(data){
				if (data.isDirty) {
					show_msg("非法内容");
				} else {
					loginTip("loginComment", aid, content);
				}
			},
		});
	}
	
	function loginTip(act, aid, content){
		var actDesc = "赞";
		if (act == "loginAndCai") { 
			actDesc = "踩";
		} else if (act == "loginComment"){
			actDesc = "评论";
		}
		
		var loginUrl = "http://pt.3g.qq.com/s?aid=touchLogin&bid_code=wenwen&t=sogouwenwen&css=http://cache.soso.com/mobile/wenwen/css/login_sogou.css&r=957&go_url=http%3A%2F%2Fwenwen.m.sogou.com%3A80%2Fqudetail.jsp%3Fqid%3D581715614%26from%3Dac_index%26ch%3Dwap3.ac.cat.lnn%26g_ut%3D3%26origp%3Dac.ctg" + encodeURIComponent("&src="+ act +"&aid=" + aid + "&content=" + content);
		var content = '<p>你需要登录QQ账户才能' + actDesc + '回答哦！</p>';		
		content += '		<div class="button">';
		content += '			<a href="' + loginUrl + '">现在去登录</a>';
		content += '		</div>';
		tips = new WW_mobile.confirmTips({
			message : content,		
			mask : true
		})
		var tipPreventDefaultHandler = function(e) { e.preventDefault(); return false;}
		$("#tip_bg_id").on("touchmove", tipPreventDefaultHandler);
	}
	
	
	
	function evaluateAnswer(){
		// 不是方式类问题直接返回
		if (!isMethodQues) {
			return;
		}
		var aid = $(this).parents(".agree_with_wrap").attr("data-aid");
		var evaValue = $(this).attr("data-evaval");
		$.ajax({
			type:'GET',
			url:"/eva_answer.jsp?sid=ATWM_XHKvCECazaeGCC6z_TP&qid=581715614&g_ut=3&op=2&rand=" + Math.random() + "&aid=" + aid + "&evaVal=" + evaValue,
			dataType:'json',
			timeout:10000,
			success:function(data){
				if (isMethodQues) {
					pr_get($(this), "wap3.de.in.to." + evaValue, 0, "wapask");
				}
				
				if (data.resultCode == '0') {
					var agreeDiv = $(".agree_with_wrap").filter("[data-aid='" + aid + "']");
					agreeDiv.find(".btn_wrap").hide();
					agreeDiv.find("p").last().show();
					agreeDiv.find("p").last().text(evaValue == "1" ? "试过靠谱":"有点道理");
					agreeDiv.attr("data-evaval", evaValue);
				} else if (data.resultMsg == '-1') { // 结果消息-1，是重复操作
					show_msg("你已经评价过这个答案啦!");
				} else if (data.resultMsg != ''){
					// show_msg(data.resultMsg);
					var agreeDiv = $(".agree_with_wrap").filter("[data-aid='" + aid + "']");
					agreeDiv.find(".btn_wrap").hide();
					agreeDiv.find("p").last().show();
					agreeDiv.find("p").last().text(evaValue == "1" ? "试过靠谱":"有点道理");
					agreeDiv.attr("data-evaval", evaValue);
				} else {
					show_msg("网络繁忙，操作失败，请稍候。");
				}
			},
		})
	}
	
	// 各种函数绑定
	$(document).ready(function () {
		$('.good_answer').each(function (idx, e){
			$(e).click(zanLoginTip);
		});
		$('.bad_answer').each(function (idx, e){
			$(e).click(caiLoginTip);
		});
		
		// 提交评论按钮函数绑定
		$(".comment_additional_wrap").find('.btn_submit').each(function (idx, e){
			$(e).click(commentAnsLoginTip);
		});
		$(".examine_minutely").each(function(idx, e){
			$(e).click(show_pump_div);
		});
		$(".adopt_answer").each(function(idx, e){
			$(e).click(show_adopt_div);
		});
		$(".examine_minutely_wrap").find(".btn_submit").each(function(idx, e){
			$(e).click(pump_submit);
		});
		
		$(".adopt_answer_wrap").each(function(idx, e){
			if (isMethodQues) {
				$(e).find("ul a").first().click(function(){ // 选择有点道理
					$(this).addClass("checked");
					$(this).parent().parent().prev().prev().val("2");
					$(this).parent().next().find("a").removeClass("checked");
				});
				$(e).find("ul a").last().click(function(){ // 选择验证过
					$(this).addClass("checked");
					$(this).parent().parent().prev().prev().val("1");
					$(this).parent().prev().find("a").removeClass("checked");
				});
			}
			$(e).find(".btn_submit").click(take_answer);
		});
		
		if (isMethodQues) {
			$(".agree_with_wrap").find("div a").each(function(idx, e){
				$(e).click(evaluateAnswer); 
			});
		}
		
		$(".captcha_layer").find(".btn_close").click(function(){
			$(".mask").hide();
			$(".captcha_layer").hide();
		});
		
		$(".captcha_input").find("a").click(function(){
			$(".captcha_input").find("img").attr("src", verifyImgUrl + "&rrr=" + Math.random())
			$(".captcha_input").find("input").focus();
		});
		
		$("textarea").each(function(i, e){
			if ($(e).attr("placeholder").length > 1) {
				$(e).parent().addClass("textarea_no_before");
			}
		});
	});
	
	function moreAnsComment(elem) {
     	var showNum = 0;
     	var commentLiArray = $(elem).parent().find("li");
     	commentLiArray.each(function(idx, li){
			if ($(li).css("display") == "none" && showNum < 10) {
				$(li).css("display", "block");
				showNum++;
				if (idx == commentLiArray.length - 1) {
					$(li).parent().find(".more_content").hide();
				}
			}				
     	});
	}
	
	$('.comment_content').click(function(){
	     $(this).toggleClass("comment_clicked");
	     $(this).parent().parent().parent().find(".comment_additional_wrap").toggle();
	     
	    var aid = $(this).attr("data-aid");
	    if ($(this).attr("class").indexOf("comment_clicked") == -1){
	    	var commentListUl = $("#comment_list_" + aid);
	    	var commentLiArray = commentListUl.find("li");
	    	commentLiArray.each(function(i, li){
	    	 	if (i >= 3) {
	    			 $(li).css("display", "none");
	    		 }
	    	 });
	    	 if (commentLiArray.length > 3 && 
	    			 commentListUl.find(".more_content").length == 0) {
	    		 commentListUl.append("<a class='more_content' href='javascript:;' onclick='moreAnsComment(this);'>更多评论</a>");
	    	 }
	    	 $("#comment_list_" + aid).find(".more_content").show();
	    	 $(this).parent().parent().parent().find(".btn_wrap").hide();
	    	 $(this).parent().parent().parent().find(".textarea_wrap").removeClass("onfocus");
	    } else {
	    	if (len($("#ans_comment_" + aid).val()) > 0) {
	    		$("#ans_comment_" + aid).parent().addClass("onfocus");
	    		$("#ans_comment_" + aid).parent().parent().find(".btn_wrap").show();
	    	}
	    	$(".good_answer").filter("[data-aid='" + aid + "']").removeClass("good_answer_clicked");
		    $(".agree_with_wrap").filter("[data-aid='" + aid + "']").hide();
	    }
	})

	function showMoreList(elem) {
		var showNum = 0;
		var ansArray = $("#ans_list_div_id").children();
		ansArray.each(function(idx, ans){
			if ($(ans).css("display") == "none" && showNum < 10) {
				$(ans).css("display", "block");
				showNum++;
				if (idx >= ansArray.length - 1) {
					$(ans).parent().parent().find(".more_content").hide();
				}
			}				
     	});
		
		return false;
	}

	$('.more_option').click(function(){
	    $(this).toggleClass("more_option_clicked");
	    $(this).parent().parent().parent().find(".toolbar_open").toggle();
	    if ($(this).attr("class").indexOf("more_option_clicked") == -1){
	    	$(this).parent().parent().parent().find(".comment_additional_wrap").hide();
	    	$(this).parent().parent().parent().find(".comment_content").removeClass("comment_clicked");	
	    	 
	    	$(this).parent().parent().parent().find(".comment_additional_wrap").find(".btn_wrap").hide();
	    	$(this).parent().parent().parent().find(".textarea_wrap").removeClass("onfocus");
	    } else {
	    	var aid = $(this).attr("data-aid");
	    	$(".good_answer").filter("[data-aid='" + aid + "']").removeClass("good_answer_clicked");
	    	$(".agree_with_wrap").filter("[data-aid='" + aid + "']").hide();
	    }
	})

	$('.textarea_wrap textarea').focus(function(){
	    $(this).parent().addClass("onfocus");
	    $(this).parent().parent().find(".btn_wrap").show();
	})

	$('.back_top').click(function(){
		window.scrollTo(0,0);
	})
	
	// 把问题中图片的大图地址先放到数组中
	var bigImgSrcs = new Array();
	
	// display pic section
	
	
	// 设置缩略图显示宽度
	var totalWidth = 320;
	var totalHeight = 640;
	if (window.innerWidth) {
		totalWidth = window.innerWidth;
	}
	if (window.innerHeight) {
		totalHeight = window.innerHeight;
	}
	// var picWidth = Math.round((totalWidth - 30 - 80) / bigImgSrcs.length);
	var picWidth = 50;
	
	var picImageArray = new Array();
	// 缩略图点开大图显示
	$("#ques_pic_list").find("img").each(function(i, img){
		
		// 绑定点击显示大图事件函数
		$(img).bind("click", disp_big_img);
		
		var image = new Image();
		image.src = $(img).attr("src");
		picImageArray[i] = image;
		picImageArray[i].onload=function(){
			if (picImageArray[i].width > picImageArray[i].height) {
				$(img).css("max-heigth", picWidth + "px");
				$(img).css("max-width", "1080px");
				$(img).css("height", picWidth + "px");
			} else {
				$(img).css("max-width", picWidth + "px");
				$(img).css("max-heigth", "1080px");
				$(img).css("width", picWidth + "px");
			}
		};
	});
	$("#ques_pic_list").find("li").each(function(i, e){
		$(e).css("width", picWidth + "px");
		$(e).css("height", picWidth + "px");
	});
	
	/**
	 * @title: 判断用户的滑动方向是水平还是垂直方向的。
	 * @desc: 取起始点和第一次move的点坐标计算X轴夹角，
	 *      若是大于指定的临界值crossover(默认20°)则认为是垂直方向，否则是水平方向的。
	 *      这里只针对触摸设备的单指滑动操作。
	 */
	function slideDirection(cfg) {
	    var dom = cfg.dom,//判断滑动方向的容器
	        crossover = (cfg.crossover * 1) || 20,//判断方向的临界值（与X轴夹角度数的绝对值）
	        callback = cfg.callback,//判断完成后的回调函数
	        isMob = ("ontouchstart" in document);
	    if(!isMob){
	        return false;
	    }
	    //在捕获阶段绑定事件，尽早触发
	    dom.addEventListener("touchstart", function(e) {
	        e = e.touches[0];
	        var point = {
	            x: e.pageX,
	            y: e.pageY
	        };
	        this.addEventListener("touchmove", _move, true);
	        this.addEventListener("touchend",   _end, true);
	        this.addEventListener("touchcancel", _end, true);
	        function _move(e){
	            e.preventDefault();
	            e.stopPropagation();
	            e = e.touches[0];
	            var deltaX = e.pageX - point.x,
	                deltaY = e.pageY - point.y,
	                degree = (Math.atan(Math.abs(deltaY / deltaX)) * 180) / Math.PI;
	            callback(degree < crossover ? (deltaX < 0 ? "h-left" : "h-right" ) : "v");
	            //每次完整的滑动流程中，保证move只执行一次。
	            dom.removeEventListener("touchmove", _move, true);
	        }
	        function _end(){
	            dom.removeEventListener("touchmove", _move, true);
	        }
	    }, true);
	}
	
	var imgIdx = 0;
	function hideBody() {
		$(".header").hide();
		$(".section_wrap").hide();
		$("#search_form_bottom").hide();
		$(".current_location").hide();
		$("footer").hide();
		$(".back_top").hide();
		$(".switch_tip").hide();
	}
	
	function showBody() {
		$(".header").show();
		$(".section_wrap").show();
		$("#search_form_bottom").show();
		$(".current_location").show();
		$("footer").show();
		$(".back_top").show();
		$(".switch_tip").show();
	}
	
	function disp_big_img() {
		$(".pic_view_layer").attr("data-pic-top", $(this).offset().top - 100);
		disp_big_img3(parseInt($(this).attr("data-index")));
	}
	
	function getBigPicHtml(imgIdx) {
		var html = "";
		if (bigImgSrcs.length > 1) {
			html = html + "<div class='view_bar'><span id='pic_index'>" + (imgIdx + 1) + "/" 
				+ bigImgSrcs.length + "</span><a href='#' class='btn_close' id='big_pic_show_close'></a></div>";
		}
		html = html + "<div class='pic_view_wrap' id='big_pic_div'><img id='big_pic_show' src='" 
			+ bigImgSrcs[imgIdx] + "' width='"+totalWidth+"px' align='absmiddle' /></div>";
		return html;
	}
	
	function disp_big_img3(imgIdx) {
		hideBody();
		$(".pic_view_layer").html(getBigPicHtml(imgIdx));
		$(".pic_view_layer").addClass('layer_show');
		
		slideDirection({
		    dom : document.querySelector(".pic_view_layer"),
		    crossover : 25,
		    callback : function(direct){
		        if(direct==="h-left" && imgIdx < bigImgSrcs.length - 1){
		        	disp_big_img3(++imgIdx);
		        } else if (direct==="h-right" && imgIdx > 0) {
		        	disp_big_img3(--imgIdx);
		        } 
		    }
		});
	}
	
	$(".content_detail").each(function(i, id){
		var o = $(id);
		if(o.attr("data-type") != "ques_content") {
			o.find("img").each(function(idx,img) {
				$(img).bind("click", disp_ans_img);
			});
		}	
	});
	
	function disp_ans_img() {
		$(".pic_view_layer").attr("data-pic-top", $(this).offset().top - 100);
		hideBody();
		var picHtml = "<div id='big_pic_div'><img id='big_pic_show' src='" 
			+ $(this).attr("src").replace("/waps-","/").replace("/wapm-","/") + "'/></div>";
		$(".pic_view_layer").html(picHtml);
		$(".pic_view_layer").addClass('layer_show');
	}
	$(".pic_view_layer").click(function(){
		$(this).removeClass('layer_show');
		$(".pic_view_layer").html("");
		showBody();
		window.scrollTo(0, $(this).attr("data-pic-top"))
	});
	
	window.onload=function(){
		// 页面加载完以后再通过Image对象加载问题内容中图片的大图，加快点击小图展示大图的速度
		var bigPicImageArray = new Array();
		for (var i = 0;i < bigImgSrcs.length; i++) {
			bigPicImageArray[i] = new Image();
			bigPicImageArray[i].src = bigImgSrcs[i];
		}
	}
	window.onscroll=function(){
		var scrollTop = document.documentElement.scrollTop==0? document.body.scrollTop : document.documentElement.scrollTop;
		if(scrollTop > 0){
			$(".back_top").show();
			$(".mask").css("height", (document.body.offsetHeight + scrollTop) + "px");
		} else {
			$(".back_top").hide();
		}
	}
		
	$(document).ready(function () {
		if (!isSolved) {
			$('[data-ch]').each(function(idx, elem){
				// 无满意答案把wap3.de.in.开头的data-ch值都替换成wap3.de.dn.开头，后面的不变
				// 做法比较变态，需求中有满意答案和没满意答案点击参数值都要换，只有这么做最方便
				$(elem).attr("data-ch", $(elem).attr("data-ch").replace("in", "dn").replace("ra.ln", "rq.ln"));
			});
			
			$("[href]").each(function(idx, elem){
				var href = $(elem).attr("href");
				if (href.length > 0 && href.indexOf("ch=wap3.de.in")) {
					$(elem).attr("href", href.replace("wap3.de.in", "wap3.de.dn"));
				}
			});
		}
		//为所有需要统计点击的元素绑定统计方法
		bindPrClickStat();
	});
	</script>
	<script type="text/javascript" src="http://cache.soso.com/js/an.js"></script>
<div id="adjustable_div" style="display:none"></div> 

<div class="footer search_bottom
"><form id="search_form_bottom" action="/search.jsp?g_ut=3" method="get">	   		
		<div class="searchBox bottom">
			<div class="querybox">
				<div class="searchWrap">
					<input id="h_keywords_bottom" class="query" name="key"  value=""  type="text" autocomplete="off" autocorrect="off"  onfocus="init_startbox(this)" />
																										
					<input type="button" class="sbtn" onclick="return to_search(this);" value="搜索">
					<input name="sid"  value="ATWM_XHKvCECazaeGCC6z_TP"  type="hidden" />
					<input name="origp"  value="qu.ask"  type="hidden" />
					<input name="g_ut"  value="3"  type="hidden" />	
				</div>
				
			</div>
		</div>
	</form>
	
	
		
  <div class="foot"><a href="/index.jsp?sid=ATWM_XHKvCECazaeGCC6z_TP&amp;g_ut=3&amp;biz=newHome">搜狗问问</a> - <a href="http://m.sogou.com/?e=1593" >搜狗首页</a> 
    <p>&copy; 2014 SOGOU.COM</p>
  </div>	
</div>


</body>
</html>
